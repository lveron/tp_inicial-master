# Usa una imagen base de Python.
FROM python:3.11-slim

# Establece el directorio de trabajo dentro del contenedor.
WORKDIR /app

# Instala las dependencias del sistema operativo que tu aplicación necesita.
# 'libgl1-mesa-glx' es la que faltaba y causaba el error.
RUN apt-get update && apt-get install -y libgl1-mesa-glx

# Opcional: Si tienes un archivo apt-packages.txt, puedes usar esta línea
# para instalar múltiples dependencias de sistema.
# COPY apt-packages.txt .
# RUN apt-get update && xargs apt-get install -y < apt-packages.txt

# Copia los archivos de tu proyecto al directorio de trabajo.
COPY . .

# Instala las librerías de Python desde requirements.txt.
RUN pip install --no-cache-dir -r requirements.txt

# Define el comando que se ejecutará al iniciar el contenedor.
# Esto es opcional si ya usas un Procfile, pero es una buena práctica.
CMD [ "python", "app.py" ]
